# =============================================================================
# Ingredients outside crop storage and farm moved to kitchen, restaurant, bakery
# =============================================================================

# store in fridge in room with demands
BEGIN ProductionRule
    Rule                 Storage
    Material             Ingredients  
    Container            Fridge  
    Room                 Kitchen  
	Room                 Restaurant
    Distribution         DeliveredIngredientsShortageRoomsOnly
	Condition			 DeliveredIngredientToMove
    MaxSlotId            -1  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Ingredients  
    Container            TallFridge  
    Room                 Kitchen  
	Room                 Restaurant
    Distribution         DeliveredIngredientsShortageRoomsOnly
	Condition			 DeliveredIngredientToMove
    MaxSlotId            -1  
END

# store on floor in room with demands
BEGIN ProductionRule       
    Rule                 Storage
    Material             Ingredients  
    Room                 Kitchen  
	Room                 Restaurant
    Distribution         DeliveredIngredientsShortageRoomsOnly
	Condition			 DeliveredIngredientToMoveAndNotLoaded
END

# random fridge in the map
BEGIN ProductionRule       
    Rule                 Storage
    Material             Ingredients  
    Container            Fridge  
    Distribution         Random  
	Condition			 DeliveredIngredientToMove
    MaxSlotId            -1    
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Ingredients  
    Container            TallFridge  
    Distribution         Random  
	Condition			 DeliveredIngredientToMove
    MaxSlotId            -1    
END

# on floor of room with less supply ( may have 0 demand )
BEGIN ProductionRule       
    Rule                 Storage
    Material             Ingredients  
    Room                 Kitchen  
    Distribution         DeliveredIngredientsAllRooms  
    Condition			 DeliveredIngredientToMoveAndNotLoaded
END


# =============================================================================
# Vegetable from storage to kitchen
# =============================================================================

BEGIN ProductionRule       
    Rule                 Storage
    Material             Ingredients  
    Container            Fridge  
    Room                 Kitchen  
	Room                 Restaurant
    Distribution         ProduceFromCropStorageToCookingRoom
	Condition			 InCropStorage
    MaxSlotId            -1    
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Ingredients  
    Container            TallFridge  
    Room                 Kitchen  
	Room                 Restaurant
    Distribution         ProduceFromCropStorageToCookingRoom
	Condition			 InCropStorage
    MaxSlotId            -1    
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Ingredients  
    Room                 Kitchen  
	Room                 Restaurant
    Distribution         ProduceFromCropStorageToCookingRoom
	Condition			 InCropStorage
END

# =============================================================================
# Cooked food to canteen 
# =============================================================================

BEGIN ProductionRule       
    Rule                 Storage
    Material             IngredientsCooked  
    Container            ServingTable  
    Distribution         Nearest  
    MinSlotId            1  
    MaxSlotId            4  
    Properties           HighPriority
	Condition			 NotInFarmOrCropStorage
	Properties           RequireDestinationRoomSet
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             IngredientsCooked  
    Container            SmallServingTable  
    Distribution         Nearest  
    MinSlotId            1  
    MaxSlotId            2  
    Properties           HighPriority
	Condition			 NotInFarmOrCropStorage
	Properties           RequireDestinationRoomSet
END


# =============================================================================
# Fruits (Cooked Ingredient ) from storage to kitchen
# =============================================================================

BEGIN ProductionRule       
    Rule                 Storage
    Material             IngredientsCooked  
    Container            Fridge  
    Room                 Kitchen  
	Room                 Restaurant
    Distribution         ProduceFromCropStorageToCookingRoom
	Condition			 InCropStorage
	MaxSlotId            -1
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             IngredientsCooked  
    Container            TallFridge  
    Room                 Kitchen  
	Room                 Restaurant
    Distribution         ProduceFromCropStorageToCookingRoom
	Condition			 InCropStorage
	MaxSlotId            -1
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             IngredientsCooked  
    Room                 Kitchen  
	Room                 Restaurant
    Distribution         ProduceFromCropStorageToCookingRoom
	Condition			 InCropStorage
END

# =============================================================================

BEGIN ProductionRule       
    Rule                 Storage
    Material             FoodTray  
    Container            ServingTable  
    Distribution         Linked  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             FoodTray  
    Container            ServingTable  
    Distribution         OutOfStock  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             FoodTray  
    Container            ServingTable  
    Distribution         Nearest
    Condition            NotInFoodSystem  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             FoodTray  
    Container            SmallServingTable  
    Distribution         Linked  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             FoodTray  
    Container            SmallServingTable  
    Distribution         OutOfStock  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             FoodTray  
    Container            SmallServingTable  
    Distribution         Nearest
    Condition            NotInFoodSystem  
END

 BEGIN ProductionRule       
    Rule                 Storage
    Material             FoodTray  
    Container            TrayDispenser
    Distribution         Linked 
    MaxSlotId            4
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             FoodTray  
    Container            TrayDispenser
    Distribution         OutOfStock  
    MaxSlotId            4
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             FoodTray  
    Container            TrayDispenser  
    Distribution         Nearest
    Condition            NotInFoodSystem  
    MaxSlotId            4
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             FoodTrayDirty  
    Container            Sink  
    Distribution         Linked
    Condition            NotDuringMealService  
    StackInRoom          Canteen
    StackInRoom          Staffroom
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             FoodTrayDirty  
    Container            Table
    Room                 Canteen
    Distribution         Nearest
    Condition            NotInFoodSystem  
    StackInRoom          Canteen
    StackInRoom          Staffroom
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             FoodTrayDirty  
    Room                 Canteen
    Container            Table
    Distribution         Linked
    Condition            NotInKitchenOrCanteen  
    StackInRoom          Canteen
    StackInRoom          Staffroom
    MaxSlotId            3
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             PrisonerUniform  
    Container            Table  
    Room                 Intake  
    Distribution         Random  
    MaxSlotId            3  
    Condition            UniformsInIntake  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             PrisonerUniform  
    Container            Table  
    Room                 Laundry  
    Distribution         NonCompeting  
    MaxSlotId            3  
    Condition            UniformsRequireMoving  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             PrisonerUniform  
    Room                 Laundry  
    Distribution         NonCompeting  
    Condition            UniformsRequireMoving  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             PrisonerUniform  
    Container            Table  
    Room                 Intake  
    Distribution         Random  
    MaxSlotId            3  
    Condition            UniformsRequireMovingToIntake
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             DirtyPrisonerUniform  
    Room                 Laundry  
    Distribution         NonCompeting  
    Condition            UniformsNotTargetted
END

BEGIN ProductionRule
    Rule                Storage
    Material            DirtyPrisonerUniform
    Container           LaundryMachine
    Room                Laundry
    Distribution        NonCompeting
    Condition           UniformsInLaundry
    MaxSlotId           0
END 

BEGIN ProductionRule
    Rule                Storage
    Material            DirtyPrisonerUniform
    Container           LaundryBasket
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             CrumpledPrisonerUniform  
    Container            IroningBoard  
    Room                 Laundry  
    Distribution         NonCompeting  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             CrumpledPrisonerUniform  
    Container            IroningBoardShort  
    Room                 Laundry  
    Distribution         NonCompeting  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Bleach  
    Room                 CleaningCupboard  
    Distribution         Random  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Log  
    Container            WorkshopSaw  
    Distribution         NonCompeting  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Log  
    Container            WorkshopSaw  
    Distribution         OutOfStock  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Log  
    Container            Table  
    Room                 Workshop  
    Distribution         NonCompeting  
    MaxSlotId            3  
    Condition            NotLoaded  
END
BEGIN ProductionRule       
    Rule                 Storage
    Material             Log  
    Container            SmallTable  
    Room                 Workshop  
    Distribution         NonCompeting  
    MaxSlotId            3  
    Condition            NotLoaded  
END
BEGIN ProductionRule       
    Rule                 Storage
    Material             Log  
    Container            OakTable  
    Room                 Workshop  
    Distribution         NonCompeting  
    MaxSlotId            3  
    Condition            NotLoaded  
END
BEGIN ProductionRule       
    Rule                 Storage
    Material             Log  
    Room                 Workshop  
    Distribution         NonCompeting  
    Condition            NotLoaded  
END


# 4626 stack logs inside storage room ( Empty destination so it only stack, not moving anywhere )
BEGIN ProductionRule       
    Rule                 Storage
	Material             Log  
    StackInRoom          Storage
    Condition            NotLoaded  
	RequireMinimumStackRatio	0.5
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Log  
    Room                 Storage  
    Distribution         NonCompeting  
    Condition            NotLoaded  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Wood  
    Container            CarpenterTable  
    Distribution         NonCompeting  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Wood  
    Container            CarpenterTable  
    Distribution         OutOfStock  
END




BEGIN ProductionRule       
    Rule                 Storage
    Material             Wood  
    Container            Table  
    Room                 Workshop  
    Distribution         NonCompeting  
    MaxSlotId            3  
END
BEGIN ProductionRule       
    Rule                 Storage
    Material             Wood  
    Container            SmallTable  
    Room                 Workshop  
    Distribution         NonCompeting  
    MaxSlotId            3  
END
BEGIN ProductionRule       
    Rule                 Storage
    Material             Wood  
    Container            OakTable  
    Room                 Workshop  
    Distribution         NonCompeting  
    MaxSlotId            3  
END




BEGIN ProductionRule       
    Rule                 Storage
    Material             Wood  
    Room                 Workshop  
    Distribution         NonCompeting  
    Condition            NotLoaded  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             SheetMetal  
    Container            WorkshopSaw  
    Distribution         NonCompeting  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             SheetMetal  
    Container            WorkshopSaw  
    Distribution         OutOfStock  
END



BEGIN ProductionRule       
    Rule                 Storage
    Material             SheetMetal  
    Container            Table  
    Room                 Workshop  
    Distribution         NonCompeting  
    MaxSlotId            3  
    Condition            NotLoaded  
END
BEGIN ProductionRule       
    Rule                 Storage
    Material             SheetMetal  
    Container            SmallTable  
    Room                 Workshop  
    Distribution         NonCompeting  
    MaxSlotId            3  
    Condition            NotLoaded  
END
BEGIN ProductionRule       
    Rule                 Storage
    Material             SheetMetal  
    Container            OakTable  
    Room                 Workshop  
    Distribution         NonCompeting  
    MaxSlotId            3  
    Condition            NotLoaded  
END


BEGIN ProductionRule       
    Rule                 Storage
    Material             SheetMetal  
    Room                 Workshop  
    Distribution         NonCompeting  
    Condition            NotLoaded  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             LicensePlateBlank  
    Container            WorkshopPress  
    Distribution         NonCompeting  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             LicensePlate  
    Container            Table  
    Room                 Workshop  
    Distribution         NonCompeting  
    MaxSlotId            3  
END
BEGIN ProductionRule       
    Rule                 Storage
    Material             LicensePlate  
    Container            SmallTable  
    Room                 Workshop  
    Distribution         NonCompeting  
    MaxSlotId            3  
END
BEGIN ProductionRule       
    Rule                 Storage
    Material             LicensePlate  
    Container            OakTable  
    Room                 Workshop  
    Distribution         NonCompeting  
    MaxSlotId            3  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             LicensePlate  
    Room                 Workshop  
    Distribution         NonCompeting  
    Condition            NotLoadedOnTable  
END

BEGIN ProductionRule       
    Rule                 Entity
    Container            Hearse  
    Distribution         Random  
    MaxSlotId            3  
    Condition            EntityDead  
    Properties           HighPriority  
END

BEGIN ProductionRule       
    Rule                 Entity
	Container        HearseBoat 
    Distribution         Random  
    MaxSlotId            19  
    Condition            EntityDead  
    Properties           HighPriority  
END

BEGIN ProductionRule       
    Rule                 Entity
	Container        HearseHeli 
    Distribution         Random  
    MaxSlotId            19  
    Condition            EntityDead  
    Properties           HighPriority  
END

BEGIN ProductionRule       
    Rule                 Entity
    Container            PrisonerBus  
    Distribution         Random  
    MaxSlotId            8
    Condition            DeathRowTransfer  
    Properties           HighPriority  
END

BEGIN ProductionRule       
    Rule                 Entity
    Container            PrisonBoat  
    Distribution         Random  
    MaxSlotId            20
    Condition            DeathRowTransfer  
    Properties           HighPriority  
END

BEGIN ProductionRule       
    Rule                 Entity
    Container            PrisonHeli  
    Distribution         Random  
    MaxSlotId            20
    Condition            DeathRowTransfer  
    Properties           HighPriority  
END
BEGIN ProductionRule       
    Rule                 Entity
    Container            MorgueSlab  
    Room                 Morgue  
    Distribution         Random  
    Condition            EntityDead  
    Properties           HighPriority  
END

BEGIN ProductionRule       
    Rule                 Entity
    Container            MedicalBed  
    Room                 MedicalWard  
    Distribution         Nearest  
    Properties           HighPriority  
    Condition            EntitySeriouslyInjured  
END
    
BEGIN ProductionRule
    Rule                Storage
    Material            LibraryBookUnsorted
    Room                Library
    Distribution        Random
    Condition           NotLoaded
END

BEGIN ProductionRule
    Rule                Storage
    Material            LibraryBookUnsorted
    Container           SortingTable
    Room                Library
    Distribution        Random
    Condition           NotLoaded 
END

BEGIN ProductionRule
    Rule                Storage
    Material            LibraryBookSorted
    Container           LibraryBookshelf
    Room                Library
    Distribution        Random
END

BEGIN ProductionRule
    Rule                Storage
    Material            LibraryBookSorted
    Container           ShortBookcase
    Room                Library
    Distribution        Random
END

BEGIN ProductionRule
    Rule                Storage
    Material            IngredientsCooking
    Container           Cooker
    Room                Kitchen
    Distribution        Nearest
    Condition           NotLoaded
    MaxSlotId           1
END

BEGIN ProductionRule
    Rule                Storage
    Material            MailUnsorted
    Container           SortingTable
    Room                MailRoom
    Distribution        Random
END

BEGIN ProductionRule
    Rule                Storage
    Material            MailUnsorted
    Container           Table
    Room                MailRoom
    Distribution        Random
    MaxSlotId           3
END

BEGIN ProductionRule
    Rule                Storage
    Material            MailSorted
    Container           MailSatchel
    Room                MailRoom
    Distribution        Random
END

BEGIN ProductionRule
    Rule                Storage
    Material            MailSatchel
    Container           Table
    Room                MailRoom
    Distribution        OutOfStock
    MaxSlotId           3
END

BEGIN ProductionRule
    Rule                Storage
    Material            MailSatchel
    Room                MailRoom
    Distribution        OutOfStock
END

BEGIN ProductionRule
    Rule                Storage
    Material            MailSatchel
    Container           Table
    Room                MailRoom
    Distribution        Random
    MaxSlotId           3
END

BEGIN ProductionRule
    Rule                Storage
    Material            MailSatchel
    Room                MailRoom
    Distribution        Random
    Condition           NotLoaded
END

BEGIN ProductionRule
    Rule                Storage
    Material            ShopGoods
    Room                Shop
    Container           ShopShelf
    Distribution        NonCompeting
    Condition           InRoom
    MaxSlotId           2
    Properties          LoadObject
END

BEGIN ProductionRule
    Rule                Storage
    Material            ShopGoods
    Room                Shop
    Container           Table
    Distribution        Random
    Condition           NotLoaded
    MaxSlotId           3
END

BEGIN ProductionRule
    Rule                Storage
    Material            ShopGoods
    Room                Shop
    Distribution        Random
    Condition           NotLoaded
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             StaffFoodBoxed
    Container            ServingTable  
    Distribution         Random  
    MinSlotId            1  
    MaxSlotId            4
    ContainerCondition   StaffOnly
    Properties           HighPriority
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             StaffFood
    Container            ServingTable  
    Distribution         Random  
    MinSlotId            1  
    MaxSlotId            4
    ContainerCondition   StaffOnly
    Properties           HighPriority
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             StaffFoodBoxed
    Container            SmallServingTable  
    Distribution         Random  
    MinSlotId            1  
    MaxSlotId            2
    ContainerCondition   StaffOnly
    Properties           HighPriority
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             StaffFood
    Container            SmallServingTable  
    Distribution         Random  
    MinSlotId            1  
    MaxSlotId            2
    ContainerCondition   StaffOnly
    Properties           HighPriority
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Newspaper
    Container            Table  
    Room                 Staffroom
    Distribution         Random  
    MinSlotId            0  
    MaxSlotId            3
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Newspaper
    Room                 Staffroom
    Distribution         Random  
END

BEGIN Processor
    Processor            WorkshopSaw
    Input                SheetMetal
    Output               LicensePlateBlank
    OutputCount          2
    OperatingTime        12.0
END

BEGIN Processor
    Processor            WorkshopSaw
    Input                Log
    Output               Wood
    OutputCount          4
    OperatingTime        30.0
END

BEGIN Processor
    Processor            WorkshopPress
    Input                LicensePlateBlank
    Output               LicensePlate
    OperatingTime        6.0
END

BEGIN Processor
    Processor            IroningBoard
    Input                CrumpledPrisonerUniform
    Output               PrisonerUniform
    OperatingTime        4.0
    Properties           ShowDuringOperation
END

BEGIN Processor
    Processor            IroningBoardShort
    Input                CrumpledPrisonerUniform
    Output               PrisonerUniform
    OperatingTime        4.0
    Properties           ShowDuringOperation
END

BEGIN Processor
    Processor            CarpenterTable
    Input                Wood
    InputCount           5
    Output               SuperiorBed
    OperatingTime        60.0
    Properties           ShowDuringOperation
END

BEGIN Processor
    Processor            SortingTable
    Input                LibraryBookUnsorted
    Output               LibraryBookSorted
    OperatingTime        15.0
    Worker               Prisoner
    BEGIN AlternateOutput
        Type             RuinedBook 
        Count            1
        Chance           0.1
    END
END

BEGIN Processor
    Processor            SortingTable
    Input                MailUnsorted
    Output               MailSorted
    OperatingTime        15.0
    Worker               Guard
    Worker               Prisoner
END


# =============================================================================
# Storage compost & HQ fertilizer
# =============================================================================

# Store compost & HQ fertilizer

BEGIN ProductionRule
    Rule                Storage
    Material            CompostFertilizer
    Container           Shed
    Room                VegetableAllotment
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            CompostFertilizer
    Room                VegetableAllotment
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END

BEGIN ProductionRule
    Rule                Storage
    Material            CompostFertilizer
    Container           Shed
    Room                FarmingField
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            CompostFertilizer
    Room                FarmingField
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END

BEGIN ProductionRule
    Rule                Storage
    Material            HighQualityFertilizer
    Container           Shed
    Room                VegetableAllotment
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            HighQualityFertilizer
    Room                VegetableAllotment
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END

BEGIN ProductionRule
    Rule                Storage
    Material            HighQualityFertilizer
    Container           Shed
    Room                FarmingField
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            HighQualityFertilizer
    Room                FarmingField
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END

# =============================================================================
# Store vegetables seeds
# =============================================================================

BEGIN ProductionRule
    Rule                Storage
    Material            CropCarrotPlant
    Container           Shed
    Room                VegetableAllotment
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            CropCarrotPlant
    Room                VegetableAllotment
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END


BEGIN ProductionRule
    Rule                Storage
    Material            CropPotatoPlant
    Container           Shed
    Room                VegetableAllotment
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            CropPotatoPlant
    Room                VegetableAllotment
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END


BEGIN ProductionRule
    Rule                Storage
    Material            CropTomatoPlant
    Container           Shed
    Room                VegetableAllotment
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            CropTomatoPlant
    Room                VegetableAllotment
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END


BEGIN ProductionRule
    Rule                Storage
    Material            CropCabbagePlant
    Container           Shed
    Room                VegetableAllotment
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            CropCabbagePlant
    Room                VegetableAllotment
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END

# =============================================================================
# Store fruit seeds
# =============================================================================

BEGIN ProductionRule
    Rule                Storage
    Material            CropAppleTree
    Container           Shed
    Room                FruitOrchard
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            CropAppleTree
    Room                FruitOrchard
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END


BEGIN ProductionRule
    Rule                Storage
    Material            CropOrangeTree
    Container           Shed
    Room                FruitOrchard
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            CropOrangeTree
    Room                FruitOrchard
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END


BEGIN ProductionRule
    Rule                Storage
    Material            CropPeachTree
    Container           Shed
    Room                FruitOrchard
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            CropPeachTree
    Room                FruitOrchard
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END


BEGIN ProductionRule
    Rule                Storage
    Material            CropBananaTree
    Container           Shed
    Room                FruitOrchard
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            CropBananaTree
    Room                FruitOrchard
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END

# =============================================================================
# Store crop seeds
# =============================================================================

BEGIN ProductionRule
    Rule                Storage
    Material            CropCornPlant
    Container           Shed
    Room                FarmingField
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            CropCornPlant
    Room                FarmingField
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END


BEGIN ProductionRule
    Rule                Storage
    Material            CropWheatPlant
    Container           Shed
    Room                FarmingField
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            CropWheatPlant
    Room                FarmingField
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END


BEGIN ProductionRule
    Rule                Storage
    Material            CropBarleyPlant
    Container           Shed
    Room                FarmingField
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            CropBarleyPlant
    Room                FarmingField
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END

# =============================================================================
# Store Flower seeds
# =============================================================================

BEGIN ProductionRule
    Rule                Storage
    Material            FlowerRoseBush
    Container           Shed
    Room                FlowerGarden
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            FlowerRoseBush
    Room                FlowerGarden
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END


BEGIN ProductionRule
    Rule                Storage
    Material            FlowerSunflower
    Container           Shed
    Room                FlowerGarden
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            FlowerSunflower
    Room                FlowerGarden
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END


BEGIN ProductionRule
    Rule                Storage
    Material            FlowerMixedBegonias
    Container           Shed
    Room                FlowerGarden
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            FlowerMixedBegonias
    Room                FlowerGarden
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END


BEGIN ProductionRule
    Rule                Storage
    Material            FlowerHeatherBushes
    Container           Shed
    Room                FlowerGarden
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            FlowerHeatherBushes
    Room                FlowerGarden
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END


BEGIN ProductionRule
    Rule                Storage
    Material            FlowerHydrangeaPlant
    Container           Shed
    Room                FlowerGarden
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           -1
END 

BEGIN ProductionRule
    Rule                Storage
    Material            FlowerHydrangeaPlant
    Room                FlowerGarden
    Distribution        Nearest
    Condition           NotLoadedIsStack
    MaxSlotId           0
END

# =============================================================================
# Storage Vegetables produced from farms
# =============================================================================

BEGIN ProductionRule
    Rule                Storage
    Material            Ingredients
	Container           TallFridge
    Distribution        CropDistribution
	Condition           InFarmAndNotWithinGatherer
	MaxSlotId            -1
	RequireMinimumStackRatio	0.5
	Properties			NoStackingIfLoaded
	Properties          DestinationRoomNeedToSatisfyRequirements
END

BEGIN ProductionRule
    Rule                Storage
    Material            Ingredients
	Container           StorageShelf
    Distribution        CropDistribution
	Condition           InFarmAndNotWithinGatherer
	MaxSlotId            -1
	RequireMinimumStackRatio	0.5
	Properties			NoStackingIfLoaded
	Properties          DestinationRoomNeedToSatisfyRequirements
END

BEGIN ProductionRule
    Rule                Storage
    Material            Ingredients
	Container           Fridge
    Distribution        CropDistribution
	Condition           InFarmAndNotWithinGatherer
	MaxSlotId            -1
	RequireMinimumStackRatio	0.5
	Properties			NoStackingIfLoaded
	Properties          DestinationRoomNeedToSatisfyRequirements
END

# Floor to container
BEGIN ProductionRule
    Rule                Storage
    Material            Ingredients
	Container           Fridge
    Distribution        SameRoom
	Condition           InCropStorage
	MaxSlotId            -1
END
BEGIN ProductionRule
    Rule                Storage
    Material            Ingredients
	Container           TallFridge
    Distribution        SameRoom
	Condition           InCropStorage
	MaxSlotId            -1
END
BEGIN ProductionRule
    Rule                Storage
    Material            Ingredients
	Container           StorageShelf
    Distribution        SameRoom
	Condition           InCropStorage
	MaxSlotId            -1
END

# Farm -> floor
BEGIN ProductionRule
    Rule                Storage
    Material            Ingredients
    Distribution        CropDistribution
	Condition           InFarmAndNotWithinGatherer
	Properties			NoStackingIfLoaded
	RequireMinimumStackRatio	0.5
END



# =============================================================================
# Storage Fruits produced from farms
# =============================================================================


BEGIN ProductionRule
    Rule                Storage
    Material            IngredientsCooked
	Container           TallFridge
    Distribution        CropDistribution
	Condition           InFarmAndNotWithinGatherer
	MaxSlotId            -1
	Properties          DestinationRoomNeedToSatisfyRequirements
	Properties			NoStackingIfLoaded
	RequireMinimumStackRatio	0.5
END

BEGIN ProductionRule
    Rule                Storage
    Material            IngredientsCooked
	Container           StorageShelf
    Distribution        CropDistribution
	Condition           InFarmAndNotWithinGatherer
	MaxSlotId            -1
	Properties          DestinationRoomNeedToSatisfyRequirements
	Properties			NoStackingIfLoaded
	RequireMinimumStackRatio	0.5
END

BEGIN ProductionRule
    Rule                Storage
    Material            IngredientsCooked
	Container           Fridge
    Distribution        CropDistribution
	Condition           InFarmAndNotWithinGatherer
	MaxSlotId            -1
	Properties          DestinationRoomNeedToSatisfyRequirements
	Properties			NoStackingIfLoaded
	RequireMinimumStackRatio	0.5
END

# Floor to container
BEGIN ProductionRule
    Rule                Storage
    Material            IngredientsCooked
	Container           Fridge
    Distribution        SameRoom
	Condition           InCropStorage
	MaxSlotId            -1
END
BEGIN ProductionRule
    Rule                Storage
    Material            IngredientsCooked
	Container           TallFridge
    Distribution        SameRoom
	Condition           InCropStorage
	MaxSlotId            -1
END
BEGIN ProductionRule
    Rule                Storage
    Material            IngredientsCooked
	Container           StorageShelf
    Distribution        SameRoom
	Condition           InCropStorage
	MaxSlotId            -1
END

BEGIN ProductionRule
    Rule                Storage
    Material            IngredientsCooked
    Distribution        CropDistribution
	Condition           InFarmAndNotWithinGatherer
	Properties			NoStackingIfLoaded
	RequireMinimumStackRatio	0.5
END


# =============================================================================
# Cooked food dropped outside food system moved to canteen (like legacy behaviour)   #5041
# =============================================================================

BEGIN ProductionRule       
    Rule                 Storage
    Material             IngredientsCooked  
    Container            ServingTable  
    Distribution         Nearest  
    MinSlotId            1  
    MaxSlotId            4  
	Condition			 NotInRoom
	Room				 Canteen
	Room				 Kitchen
	Room				 Storage
	Room				 FruitOrchard
	Room				 Pantry
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             IngredientsCooked  
    Container            SmallServingTable  
    Distribution         Nearest  
    MinSlotId            1  
    MaxSlotId            2  
	Condition			 NotInRoom
	Room				 Canteen
	Room				 Kitchen
	Room				 Storage
	Room				 FruitOrchard
	Room				 Pantry
END

# =============================================================================
# Storage Field crops ( barley, corn ..etc ) from farms
# =============================================================================


BEGIN ProductionRule
    Rule                Storage
    Material            Barley
	Container           StorageShelf
    Distribution        CropDistribution
	Condition           NotInFieldCropDestAndNotWithinGatherer
	MaxSlotId            -1
	Properties          DestinationRoomNeedToSatisfyRequirements
	Properties			NoStackingIfLoaded
	RequireMinimumStackRatio	0.5
END

BEGIN ProductionRule
    Rule                Storage
    Material            Barley
    Distribution        CropDistribution
	Condition           NotInFieldCropDestAndNotWithinGatherer
	Properties          DestinationRoomNeedToSatisfyRequirements
	Properties			NoStackingIfLoaded
	RequireMinimumStackRatio	0.5
END


BEGIN ProductionRule
    Rule                Storage
    Material            Wheat
	Container           StorageShelf
    Distribution        CropDistribution
	Condition           NotInFieldCropDestAndNotWithinGatherer
	MaxSlotId            -1
	Properties          DestinationRoomNeedToSatisfyRequirements
	Properties			NoStackingIfLoaded
	RequireMinimumStackRatio	0.5
END

BEGIN ProductionRule
    Rule                Storage
    Material            Wheat
    Distribution        CropDistribution
	Condition           NotInFieldCropDestAndNotWithinGatherer
	Properties          DestinationRoomNeedToSatisfyRequirements
	Properties			NoStackingIfLoaded
	RequireMinimumStackRatio	0.5
END


BEGIN ProductionRule
    Rule                Storage
    Material            Corn
	Container           StorageShelf
    Distribution        CropDistribution
	Condition           NotInFieldCropDestAndNotWithinGatherer
	MaxSlotId            -1
	Properties          DestinationRoomNeedToSatisfyRequirements
	Properties			NoStackingIfLoaded
	RequireMinimumStackRatio	0.5
END

BEGIN ProductionRule
    Rule                Storage
    Material            Corn
    Distribution        CropDistribution
	Condition           NotInFieldCropDestAndNotWithinGatherer
	Properties          DestinationRoomNeedToSatisfyRequirements
	Properties			NoStackingIfLoaded
	RequireMinimumStackRatio	0.5
END


# =============================================================================
# Ingredients raw/coooked to restaurant 
# =============================================================================


BEGIN ProductionRule       
    Rule                 Storage
    Material             RestaurantMeal  
    Room                 Restaurant  
    Container            DisplayCounter  
    Distribution         Nearest  
    MaxSlotId            -1  
	Condition			 InCookerAndInRestaurant
END


BEGIN ProductionRule       
    Rule                 Storage
    Material             RestaurantPlateDirty  
    Container            Sink  
    Distribution         SameRoom
    Condition            InRoom  
    Room                 Restaurant
    Properties           HighPriority
END

# =============================================================================
# Bakery
# =============================================================================



BEGIN Processor
    Processor            DoughMixer
    Input                Flour
    InputCount           1
    Output               BakeryRawProduct
    Worker               Prisoner    
    OperatingTime        5.0
END

BEGIN Processor
    Processor            Oven
    Input                BakeryRawProduct
    Output               BakeryCookedProduct
    OutputCount          1 
    Worker               Prisoner    
    OperatingTime        10.0
    MaintainInputSubtype true
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Flour  
    Container            DoughMixer  
    Room                 Bakery  
    Distribution         NonCompeting  
    Properties           LoadObject
	Properties			 NoStackingIfLoaded
    Condition            InRoom
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Flour  
    Container            Fridge  
    Room                 Bakery 
	StackInRoom			 Bakery	
    Distribution         NonCompeting  
    Condition            NotLoaded  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Flour  
    Container            TallFridge  
    Room                 Bakery  
	StackInRoom			 Bakery
    Distribution         NonCompeting  
    Condition            NotLoaded  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             Flour  
    Room                 Bakery  
	StackInRoom			 Bakery
	RequireMinimumStackRatio	0.5
    Distribution         NonCompeting  
    Condition            NotLoaded  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             BakeryRawProduct  
    Container            Oven  
    Room                 Bakery  
    Distribution         NonCompeting  
    MinSlotId            1  
    MaxSlotId            1  
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             BakeryCookedProduct  
    Container            DisplayCounter  
    Room                 Bakery  
    Distribution         NonCompeting  
    MaxSlotId            3
    # Bread types only  
    MaterialSubtype      7  
    MaterialSubtype      8  
    MaterialSubtype      9
END

BEGIN ProductionRule       
    Rule                 Storage
    Material             BakeryCookedProduct  
    Container            CakeStand  
    Room                 Bakery  
    Distribution         NonCompeting  
    MaxSlotId            -1
    # Cake types only  
    MaterialSubtype      0  
    MaterialSubtype      1  
    MaterialSubtype      2
    MaterialSubtype      3  
    MaterialSubtype      4  
    MaterialSubtype      5
    MaterialSubtype      6  
END

BEGIN ProductionRule
    Rule                Storage
    Material            BirthdayPresent  
    Container            Bed
    Container		 ComfyBed
    Container		 OldBed
    Container		 Mattress
    Container		 CoffinBed
    Container		 BunkBed
	Room Cell
	Room Dormitory
	Room PaddedCell
	Room FamilyCell
	Room HoldingCell
	Room PaddedHoldingCell
	Room SuperiorCell
    Distribution        Random
	Properties          DestinationRoomNeedToSatisfyRequirements
	Properties    IsCellOccupied
END

BEGIN ProductionRule       
    Rule                 Storage
	Material             PrisonerLetter 
    StackInRoom          Exports
    Condition            NotLoaded  
END

BEGIN ProductionRule       
    Rule                 Storage
	Material             LoveLetter
    StackInRoom          Exports
    Condition            NotLoaded  
END
